---
import BaseLayout from '../layouts/BaseLayout.astro';

const photos = [
  { src: '/blog-placeholder-1.jpg', title: 'æ˜¥æ—¥æ—¶å…‰', caption: 'æ¨±èŠ±ç››å¼€çš„å­£èŠ‚ï¼Œæ¼«æ­¥äºèŠ±æµ·ä¹‹ä¸­' },
  { src: '/blog-placeholder-2.jpg', title: 'æŠ€æœ¯æ¢ç´¢', caption: 'ä»£ç ä¸è‰ºæœ¯çš„è¾¹ç•Œï¼Œåœ¨è¿™é‡Œæ¨¡ç³Š' },
  { src: '/blog-placeholder-3.jpg', title: 'åŸå¸‚æ¼«æ­¥', caption: 'éœ“è™¹ç¯ä¸‹ï¼ŒåŸå¸‚æœ‰å®ƒç‹¬ç‰¹çš„éŸµå¾‹' },
  { src: '/blog-placeholder-4.jpg', title: 'å±±é—´å¾’æ­¥', caption: 'ç™»é¡¶é‚£ä¸€åˆ»ï¼Œæ‰€æœ‰ç–²æƒ«éƒ½å€¼å¾—' },
  { src: '/blog-placeholder-5.jpg', title: 'æµ·è¾¹éšæ‹', caption: 'æµ·æµªå£°å£°ï¼Œå¿ƒä¹Ÿè·Ÿç€å¼€é˜”èµ·æ¥' },
  { src: '/blog-placeholder-about.jpg', title: 'ç”Ÿæ´»ç‰‡æ®µ', caption: 'è®°å½•æ¯ä¸€ä¸ªå€¼å¾—çè—çš„ç¬é—´' },
];

const records = [
  {
    date: '2024-02',
    emoji: 'ğŸŒ¸',
    title: 'æ˜¥æ—¥å¾’æ­¥',
    desc: 'è¶ç€æ˜¥å…‰æ­£å¥½ï¼Œå»å±±é‡Œå¾’æ­¥äº†ä¸€å¤©ã€‚æ»¡å±±çš„é‡èŠ±ï¼Œç©ºæ°”æ¸…æ–°ï¼Œæš‚æ—¶é€ƒç¦»äº†åŸå¸‚çš„å–§åš£ã€‚',
    tags: ['æˆ·å¤–', 'è‡ªç„¶'],
  },
  {
    date: '2024-01',
    emoji: 'ğŸ“š',
    title: 'è¯»å®Œã€Šäººç±»ç®€å²ã€‹',
    desc: 'èŠ±äº†ä¸¤å‘¨æ—¶é—´è¯»å®Œäº†è¿™æœ¬å®å¤§çš„å†å²è‘—ä½œã€‚èµ«æ‹‰åˆ©çš„è§†è§’ç‹¬ç‰¹ï¼Œè®©æˆ‘å¯¹äººç±»æ–‡æ˜æœ‰äº†å…¨æ–°çš„è®¤è¯†ã€‚',
    tags: ['é˜…è¯»', 'å†å²'],
  },
  {
    date: '2023-12',
    emoji: 'ğŸœ',
    title: 'å­¦ä¼šåšæ±¤åŒ…',
    desc: 'ä¸‹å¨å®éªŒæˆåŠŸï¼èŠ±äº†ä¸€ä¸ªä¸‹åˆç ”ç©¶é…æ–¹ï¼Œæœ€ç»ˆåšå‡ºäº†çš®è–„é¦…å¤šçš„æ±¤åŒ…ã€‚å¨è‰ºåˆè¿›æ­¥äº†ä¸€ç‚¹ç‚¹ã€‚',
    tags: ['ç¾é£Ÿ', 'ç”Ÿæ´»'],
  },
  {
    date: '2023-11',
    emoji: 'ğŸ¸',
    title: 'é‡æ‹¾å‰ä»–',
    desc: 'æŠŠè½ç°çš„å‰ä»–æ“¦å¹²å‡€ï¼Œé‡æ–°å¼€å§‹ç»ƒä¹ ã€‚ç”Ÿæ´»éœ€è¦ä¸€äº›ä¸ä»£ç æ— å…³çš„äº‹æƒ…æ¥ä¿æŒå¹³è¡¡ã€‚',
    tags: ['éŸ³ä¹', 'çˆ±å¥½'],
  },
  {
    date: '2023-10',
    emoji: 'ğŸŒŠ',
    title: 'ç¬¬ä¸€æ¬¡æ½œæ°´',
    desc: 'å»ä¸‰äºšå­¦ä¹ äº†æµ®æ½œã€‚ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¹ˆå¤šå½©çš„æµ·åº•ä¸–ç•Œï¼Œåƒæ‰“å¼€äº†æ–°çš„è§†è§’ï¼Œéœ‡æ’¼åˆæ„ŸåŠ¨ã€‚',
    tags: ['æ—…è¡Œ', 'æˆ·å¤–'],
  },
  {
    date: '2023-09',
    emoji: 'â˜•',
    title: 'å’–å•¡æ‹‰èŠ±åˆä½“éªŒ',
    desc: 'å‚åŠ äº†ä¸€æ¬¡æ‰‹å†²å’–å•¡ä½“éªŒè¯¾ï¼Œå­¦ä¹ äº†ä¸åŒäº§åœ°çš„è±†å­ç‰¹ç‚¹å’Œå†²æ³¡æŠ€å·§ã€‚å‘ç°å’–å•¡æ˜¯ä¸€é—¨å¤§å­¦é—®ã€‚',
    tags: ['å’–å•¡', 'ç”Ÿæ´»'],
  },
];
---

<BaseLayout title="ç”Ÿæ´»" description="é™ˆè¯—çš„ç”Ÿæ´»è®°å½•ä¸ç›¸å†Œ">

  <!-- Hero -->
  <div class="page-hero container">
    <!-- Sparkle decorations -->
    <span class="lsp lsp1" aria-hidden="true">âœ¦</span>
    <span class="lsp lsp2" aria-hidden="true">âœ§</span>
    <span class="lsp lsp3" aria-hidden="true">â‹</span>
    <h1 class="page-hero-title"><span class="gradient-text">ç”Ÿ æ´»</span></h1>
    <p class="page-hero-desc">ä»£ç ä¹‹å¤–ï¼Œè®°å½•é‚£äº›å€¼å¾—çè—çš„ç¬é—´</p>
  </div>

  <!-- â”€â”€ Photo Gallery â”€â”€ -->
  <section class="section" style="padding-top:0">
    <div class="container">
      <h2 class="subsec-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/>
        </svg>
        ç›¸ å†Œ
      </h2>

      <div class="photo-wall">
        {photos.map((p, i) => (
          <button
            class="photo-item"
            data-index={String(i)}
            data-src={p.src}
            data-title={p.title}
            data-caption={p.caption}
            aria-label={`æŸ¥çœ‹å›¾ç‰‡ï¼š${p.title}`}
          >
            <img src={p.src} alt={p.title} loading="lazy" />
            <div class="photo-overlay">
              <span class="photo-zoom-icon" aria-hidden="true">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2">
                  <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
                  <path d="M11 8v6M8 11h6"/>
                </svg>
              </span>
              <span class="photo-title-overlay">{p.title}</span>
            </div>
          </button>
        ))}
      </div>
    </div>
  </section>

  <!-- â”€â”€ Lightbox â”€â”€ -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="å›¾ç‰‡é¢„è§ˆ" hidden>
    <div class="lb-backdrop" id="lb-backdrop"></div>
    <div class="lb-inner">
      <button class="lb-close" id="lb-close" aria-label="å…³é—­">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 6 6 18M6 6l12 12"/></svg>
      </button>
      <button class="lb-prev" id="lb-prev" aria-label="ä¸Šä¸€å¼ ">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="m15 18-6-6 6-6"/></svg>
      </button>
      <button class="lb-next" id="lb-next" aria-label="ä¸‹ä¸€å¼ ">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="m9 18 6-6-6-6"/></svg>
      </button>
      <div class="lb-img-wrap">
        <img id="lb-img" src="" alt="" />
      </div>
      <div class="lb-caption">
        <p id="lb-title" class="lb-title-text"></p>
        <p id="lb-cap-text" class="lb-cap-text"></p>
        <p class="lb-counter"><span id="lb-cur">1</span> / <span id="lb-total">{photos.length}</span></p>
      </div>
    </div>
  </div>

  <!-- â”€â”€ Life Records â”€â”€ -->
  <section class="section" style="padding-top:1rem">
    <div class="container">
      <h2 class="subsec-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/>
        </svg>
        æ—¥ è®°
      </h2>

      <div class="life-grid">
        {records.map((r) => (
          <div class="life-card">
            <div class="life-card-top">
              <span class="life-emoji">{r.emoji}</span>
              <span class="life-date">{r.date}</span>
            </div>
            <h3 class="life-title">{r.title}</h3>
            <p class="life-desc">{r.desc}</p>
            <div class="life-tags">
              {r.tags.map(t => <span class="tag">{t}</span>)}
            </div>
          </div>
        ))}
      </div>

      <!-- Quote -->
      <blockquote class="life-quote">
        <p>ç”Ÿæ´»ä¸æ­¢çœ¼å‰çš„ä»£ç ï¼Œè¿˜æœ‰è¯—å’Œè¿œæ–¹ã€‚</p>
        <cite>â€” ä»£ç é™ˆè¯—</cite>
      </blockquote>
    </div>
  </section>

</BaseLayout>

<style>
  /* â”€â”€ Page hero sparkles â”€â”€ */
  .page-hero { position: relative; }

  .lsp {
    position: absolute;
    background: var(--gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: lsp-float var(--d, 5s) ease-in-out infinite;
    pointer-events: none;
    user-select: none;
  }

  .lsp1 { top: 30%; left: 5%;  font-size: 1.3rem; --d: 5s; animation-delay: 0s; }
  .lsp2 { top: 20%; right: 6%; font-size: .9rem;  --d: 7s; animation-delay: .8s; }
  .lsp3 { bottom: 20%; right: 12%; font-size: 1.1rem; --d: 6s; animation-delay: 1.5s; }

  @keyframes lsp-float {
    0%,100% { transform: translateY(0) rotate(0deg); opacity: .7; }
    50%      { transform: translateY(-14px) rotate(180deg); opacity: 1; }
  }

  /* Sub-section title */
  .subsec-title {
    display: flex;
    align-items: center;
    gap: .55rem;
    font-size: 1.25rem;
    font-weight: 800;
    color: var(--text-1);
    margin-bottom: 1.5rem;
    letter-spacing: .06em;
  }

  .subsec-title svg {
    color: var(--primary);
    flex-shrink: 0;
  }

  /* â”€â”€ Photo wall â”€â”€ */
  .photo-wall {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-auto-rows: 200px;
    gap: .8rem;
    margin-bottom: 4rem;
  }

  /* Give some items more height for visual rhythm */
  .photo-item:nth-child(1) { grid-row: span 2; }
  .photo-item:nth-child(4) { grid-column: span 2; }

  .photo-item {
    position: relative;
    overflow: hidden;
    border-radius: var(--radius-lg);
    border: none;
    cursor: pointer;
    padding: 0;
    background: var(--bg-alt);
    transition: transform .3s cubic-bezier(.22,1,.36,1), box-shadow .3s ease;
  }

  .photo-item:hover {
    transform: scale(1.02);
    box-shadow: 0 16px 48px rgba(147,51,234,.22);
    z-index: 1;
  }

  .photo-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: transform .6s cubic-bezier(.22,1,.36,1);
  }

  .photo-item:hover img {
    transform: scale(1.08);
  }

  .photo-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      170deg,
      transparent 30%,
      rgba(0,0,0,.7) 100%
    );
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: .5rem;
    opacity: 0;
    transition: opacity .3s ease;
  }

  .photo-item:hover .photo-overlay {
    opacity: 1;
  }

  .photo-zoom-icon {
    color: #fff;
    background: rgba(255,255,255,.2);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    border-radius: 50%;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid rgba(255,255,255,.35);
    transition: transform .25s ease;
  }

  .photo-item:hover .photo-zoom-icon {
    transform: scale(1.1);
  }

  .photo-title-overlay {
    color: #fff;
    font-size: .85rem;
    font-weight: 600;
    letter-spacing: .04em;
    text-shadow: 0 1px 4px rgba(0,0,0,.5);
  }

  /* â”€â”€ Lightbox â”€â”€ */
  .lightbox {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .lightbox[hidden] { display: none; }

  .lb-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,.88);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    cursor: pointer;
  }

  .lb-inner {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: min(90vw, 900px);
    max-height: 90vh;
    gap: 1rem;
  }

  .lb-img-wrap {
    position: relative;
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: 0 32px 80px rgba(0,0,0,.6);
    max-height: 72vh;
  }

  #lb-img {
    display: block;
    max-width: 100%;
    max-height: 72vh;
    object-fit: contain;
    border-radius: var(--radius-lg);
    transition: opacity .25s ease;
  }

  .lb-caption {
    text-align: center;
    color: rgba(255,255,255,.9);
  }

  .lb-title-text {
    font-size: 1.05rem;
    font-weight: 700;
    margin-bottom: .25rem;
  }

  .lb-cap-text {
    font-size: .85rem;
    color: rgba(255,255,255,.65);
    margin-bottom: .4rem;
  }

  .lb-counter {
    font-size: .78rem;
    color: rgba(255,255,255,.45);
    font-family: 'JetBrains Mono', monospace;
  }

  /* Nav buttons */
  .lb-close,
  .lb-prev,
  .lb-next {
    position: absolute;
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.2);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    color: #fff;
    border-radius: 50%;
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background .2s ease, transform .2s ease;
    z-index: 2;
  }

  .lb-close:hover,
  .lb-prev:hover,
  .lb-next:hover {
    background: rgba(255,255,255,.25);
    transform: scale(1.1);
  }

  .lb-close {
    top: -52px;
    right: 0;
  }

  .lb-prev {
    left: -56px;
    top: 50%;
    transform: translateY(-50%);
  }

  .lb-prev:hover { transform: translateY(-50%) scale(1.1); }

  .lb-next {
    right: -56px;
    top: 50%;
    transform: translateY(-50%);
  }

  .lb-next:hover { transform: translateY(-50%) scale(1.1); }

  @media (max-width: 680px) {
    .lb-prev { left: 0; top: auto; bottom: -56px; transform: none; }
    .lb-prev:hover { transform: scale(1.1); }
    .lb-next { right: 0; top: auto; bottom: -56px; transform: none; }
    .lb-next:hover { transform: scale(1.1); }
    .lb-close { top: -52px; right: 0; }
    .photo-wall { grid-template-columns: repeat(2, 1fr); grid-auto-rows: 150px; }
    .photo-item:nth-child(1) { grid-row: span 1; }
    .photo-item:nth-child(4) { grid-column: span 1; }
  }

  @media (max-width: 420px) {
    .photo-wall { grid-template-columns: 1fr; grid-auto-rows: 200px; }
  }

  /* â”€â”€ Life records â”€â”€ */
  .life-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.25rem;
    margin-bottom: 2rem;
  }

  .life-card {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.35rem;
    background: var(--glass-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: border-color .2s, box-shadow .2s, transform .2s;
    position: relative;
    overflow: hidden;
  }

  .life-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: var(--gradient);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    opacity: .7;
  }

  .life-card:hover {
    border-color: var(--primary);
    box-shadow: var(--shadow-lg);
    transform: translateY(-3px);
  }

  .life-card-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .life-emoji {
    font-size: 2rem;
    line-height: 1;
  }

  .life-date {
    font-size: 0.78rem;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
    background: var(--surface);
    padding: 0.2em 0.6em;
    border-radius: var(--radius-full);
    border: 1px solid var(--border);
  }

  .life-title {
    font-size: 1.05rem;
    font-weight: 700;
    color: var(--text-1);
    line-height: 1.3;
  }

  .life-desc {
    font-size: 0.9rem;
    color: var(--text-muted);
    line-height: 1.75;
    flex: 1;
  }

  .life-tags {
    display: flex;
    gap: 0.4rem;
    flex-wrap: wrap;
  }

  .tag {
    font-size: .72rem;
    padding: .15em .65em;
    border-radius: 999px;
    background: rgba(147,51,234,.07);
    color: var(--secondary);
    border: 1px solid rgba(147,51,234,.12);
  }

  /* Quote */
  .life-quote {
    text-align: center;
    padding: 2.5rem;
    border-radius: var(--radius-lg);
    border: 1px solid rgba(232,121,164,.2);
    background: linear-gradient(135deg, rgba(232,121,164,.06), rgba(147,51,234,.06));
    margin-top: 1rem;
  }

  .life-quote p {
    font-size: 1.3rem;
    font-weight: 600;
    font-style: italic;
    background: var(--gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.75rem;
  }

  .life-quote cite {
    font-size: 0.85rem;
    color: var(--text-muted);
    font-style: normal;
  }
</style>

<script>
(function initLightbox() {
  const lb = document.getElementById('lightbox')!;
  const lbImg = document.getElementById('lb-img') as HTMLImageElement;
  const lbTitle = document.getElementById('lb-title')!;
  const lbCap = document.getElementById('lb-cap-text')!;
  const lbCur = document.getElementById('lb-cur')!;
  const lbTotal = document.getElementById('lb-total')!;
  const lbClose = document.getElementById('lb-close')!;
  const lbPrev = document.getElementById('lb-prev')!;
  const lbNext = document.getElementById('lb-next')!;
  const lbBackdrop = document.getElementById('lb-backdrop')!;

  const items = Array.from(document.querySelectorAll<HTMLButtonElement>('.photo-item'));
  let current = 0;

  function open(idx: number) {
    current = idx;
    render();
    lb.removeAttribute('hidden');
    document.body.style.overflow = 'hidden';
    lbImg.focus();
  }

  function close() {
    lb.setAttribute('hidden', '');
    document.body.style.overflow = '';
  }

  function render() {
    const item = items[current];
    const src     = item.dataset.src ?? '';
    const title   = item.dataset.title ?? '';
    const caption = item.dataset.caption ?? '';

    lbImg.style.opacity = '0';
    lbImg.src = src;
    lbImg.alt = title;
    lbImg.onload = () => { lbImg.style.opacity = '1'; };

    lbTitle.textContent = title;
    lbCap.textContent   = caption;
    lbCur.textContent   = String(current + 1);
    lbTotal.textContent = String(items.length);
  }

  function prev() { current = (current - 1 + items.length) % items.length; render(); }
  function next() { current = (current + 1) % items.length; render(); }

  // Open on click
  items.forEach((item, i) => {
    item.addEventListener('click', () => open(i));
  });

  lbClose.addEventListener('click', close);
  lbBackdrop.addEventListener('click', close);
  lbPrev.addEventListener('click', prev);
  lbNext.addEventListener('click', next);

  // Keyboard navigation
  document.addEventListener('keydown', (e: KeyboardEvent) => {
    if (lb.hasAttribute('hidden')) return;
    if (e.key === 'Escape')      close();
    if (e.key === 'ArrowLeft')   prev();
    if (e.key === 'ArrowRight')  next();
  });
})();
</script>
